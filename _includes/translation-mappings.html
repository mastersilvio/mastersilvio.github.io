<!-- This file generates a JavaScript object mapping translation keys to URLs -->
<!-- It's included in the head to provide URL mappings for the language switcher -->
<script>
  // Translation key to URL mappings for all posts and pages
  window.translationMappings = {
    {% comment %} Main pages {% endcomment %}
    'home': {
      'pt': '{{ "/" | relative_url }}',
      'en': '{{ "/en/" | relative_url }}'
    },
    'about': {
      'pt': '{{ "/about/" | relative_url }}',
      'en': '{{ "/en/about/" | relative_url }}'
    },
    'archive': {
      'pt': '{{ "/archive/" | relative_url }}',
      'en': '{{ "/en/archive/" | relative_url }}'
    },
    'tags': {
      'pt': '{{ "/tags/" | relative_url }}',
      'en': '{{ "/en/tags/" | relative_url }}'
    }{% comment %} Build a hash of translation keys to collect PT and EN URLs {% endcomment %}{% assign translation_map = "" | split: "" %}{% assign processed_keys = "" | split: "" %}{% for post in site.posts %}{% if post.translation_key %}{% unless processed_keys contains post.translation_key %}{% assign processed_keys = processed_keys | push: post.translation_key %}{% assign pt_post = site.posts | where: 'translation_key', post.translation_key | where: 'lang', 'pt' | first %}{% assign en_post = site.posts | where: 'translation_key', post.translation_key | where: 'lang', 'en' | first %}{% if pt_post or en_post %},
    '{{ post.translation_key }}': {
      {% if pt_post %}'pt': '{{ pt_post.url | relative_url }}'{% endif %}{% if pt_post and en_post %},
      {% endif %}{% if en_post %}'en': '{{ en_post.url | relative_url }}'{% endif %}
    }{% endif %}{% endunless %}{% endif %}{% endfor %}
  };
</script>
